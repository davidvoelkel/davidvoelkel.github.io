<!DOCTYPE html>
<html>
  <head>
    <title>Klavierschule Quiz Beispiel</title>
    <script>
      var correctAnswers = ['sekunde', 'terz', 'quarte', 'quinte'];
      var currentQuestion = 0;

      function playSounds(audioId1, audioId2) {
        var firstSound = document.getElementById(audioId1)
        if (!!audioId2) {
          firstSound.setAttribute('onended', "javascript:document.getElementById('" + audioId2 + "').play()");
        }
        firstSound.play();
      } 

      function clicked(interval) {
        console.log(currentQuestion)
        if (correctAnswers[currentQuestion] === interval) {
          currentQuestion++;
          var finishedLastQuestion = currentQuestion === correctAnswers.length
          if (finishedLastQuestion) {
            playSounds('alles-geschafft');
          } else {
            playSounds('antwort-richtig', 'frage-' + currentQuestion);
          }
        } else {
          playSounds('antwort-falsch', 'frage-' + currentQuestion); 
        }
      } 
    </script>
  </head>
  <body>
    <!-- Autoplay does not work in Chrome as intended by policy (https://stackoverflow.com/questions/50490304/how-to-make-audio-autoplay-on-chrome) -->
    <audio controls autoplay style="display: block" onended="javascript:playSounds('frage-0');currentQuestion = 0;">
      <source src="quiz.m4a" type="audio/mpeg"> Your browser does not support the audio element. 
    </audio>
    <audio id="frage-0"><source src="sekunde.m4a" type="audio/mpeg"></audio>
    <audio id="frage-1"><source src="terz.m4a" type="audio/mpeg"></audio>
    <audio id="frage-2"><source src="quarte.m4a" type="audio/mpeg"></audio>
    <audio id="frage-3"><source src="quinte.m4a" type="audio/mpeg"></audio>
    <audio id="antwort-richtig"><source src="antwort-richtig.m4a" type="audio/mpeg"></audio>
    <audio id="antwort-falsch"><source src="antwort-falsch.m4a" type="audio/mpeg"></audio>
    <audio id="alles-geschafft"><source src="alles-geschafft.m4a" type="audio/mpeg"></audio>

    <img src="esel.png" usemap="#image-map">
    <!-- Image Map Generated by http://www.image-map.net/ -->
    <map name="image-map">
        <area alt="quinte" title="quinte" href="#" coords="212,141,69" shape="circle" onclick="javascript:clicked('quinte')">
        <area alt="terz" title="terz" href="#" coords="109,283,75" shape="circle" onclick="javascript:clicked('terz')">
        <area alt="sekunde" title="sekunde" href="#" coords="446,111,66" shape="circle" onclick="javascript:clicked('sekunde')">
        <area alt="quarte" title="quarte" href="#" coords="567,346,71" shape="circle" onclick="javascript:clicked('quarte')">
    </map>

  </body>
</html>