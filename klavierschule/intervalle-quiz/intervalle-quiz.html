<!DOCTYPE html>
<html>
  <head>
    <title>Klavierschule Quiz Beispiel</title>
    <script>
      var correctAnswers = ['sekunde', 'terz', 'quarte', 'quinte'];
      var currentQuestion = -1;

      function clickedAnswer(intervalAnswer) {
        if (currentQuestion >= 0 && !isAnySoundAlreadyPlaying()) {
          if (correctAnswers[currentQuestion] === intervalAnswer) {
            currentQuestion++;
            var finishedLastQuestion = currentQuestion === correctAnswers.length
            if (finishedLastQuestion) {
              playSounds('alles-geschafft');
            } else {
              playSounds('antwort-richtig', 'frage-' + currentQuestion);
            }
          } else {
            playSounds('antwort-falsch', 'frage-' + currentQuestion); 
          }
        }
      } 

      function startQuiz() {
        if (!isAnySoundAlreadyPlaying()) { 
          playSounds('quiz'); 
        }
      }

      function playSounds(audioId1, audioId2) {
        var firstSound = document.getElementById(audioId1)
        if (!!audioId2) {
          firstSound.setAttribute('onended', "javascript:document.getElementById('" + audioId2 + "').play()");
        }
        firstSound.play();
      } 

      function isAnySoundAlreadyPlaying() {
        var allAudioElements = document.getElementsByTagName('audio');
        for (var i=0; i<allAudioElements.length; i++) {
          // when there is already another (or the same) sound playing do not interrupt it
          if (!allAudioElements[i].paused) {
            return true;
          }
        }
        return false;
      }
    </script>
  </head>
  <body>
    <!-- Autoplay does not work in Chrome as intended by policy (https://stackoverflow.com/questions/50490304/how-to-make-audio-autoplay-on-chrome) -->
    <audio id="quiz" autoplay onended="javascript:playSounds('frage-0');currentQuestion = 0;">
      <source src="quiz.m4a" type="audio/mpeg"> Your browser does not support the audio element. 
    </audio>
    <audio id="frage-0"><source src="sekunde.m4a" type="audio/mpeg"></audio>
    <audio id="frage-1"><source src="terz.m4a" type="audio/mpeg"></audio>
    <audio id="frage-2"><source src="quarte.m4a" type="audio/mpeg"></audio>
    <audio id="frage-3"><source src="quinte.m4a" type="audio/mpeg"></audio>
    <audio id="antwort-richtig"><source src="antwort-richtig.m4a" type="audio/mpeg"></audio>
    <audio id="antwort-falsch"><source src="antwort-falsch.m4a" type="audio/mpeg"></audio>
    <audio id="alles-geschafft"><source src="alles-geschafft.m4a" type="audio/mpeg"></audio>

    <a href="#">
      <img 
        src="https://cdn-icons-png.flaticon.com/512/98/98690.png?w=1480&t=st=1653945249~exp=1653945849~hmac=224024f6340c6ac346ab68cb7083199fe07bee44f5d6d985cf93054d6c29b1e9"
        onclick="javascript:startQuiz()"
      />
    </a>
    <img src="esel.png" usemap="#image-map">
    <!-- Image Map Generated by http://www.image-map.net/ -->
    <map name="image-map">
        <area alt="quinte" title="quinte" href="#" coords="212,141,69" shape="circle" onclick="javascript:clickedAnswer('quinte')">
        <area alt="terz" title="terz" href="#" coords="109,283,75" shape="circle" onclick="javascript:clickedAnswer('terz')">
        <area alt="sekunde" title="sekunde" href="#" coords="446,111,66" shape="circle" onclick="javascript:clickedAnswer('sekunde')">
        <area alt="quarte" title="quarte" href="#" coords="567,346,71" shape="circle" onclick="javascript:clickedAnswer('quarte')">
    </map>

  </body>
</html>